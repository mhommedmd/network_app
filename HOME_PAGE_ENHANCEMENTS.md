# โ ุชุญุณููุงุช ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุงูู ุงูุดุจูุฉ

## ุงูุชุญุฏูุซุงุช ุงูููููุฐุฉ

### 1๏ธโฃ ุชุบููุฑ ุงููุต ูู ุงูุฃุนูู
**ูุจู:** ุฅุฌูุงูู ุงููุจูุนุงุช  
**ุจุนุฏ:** **ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช**

```dart
_StatData(
  title: 'ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช',  // โ ุชู ุงูุชุญุฏูุซ
  value: '${NumberFormat('#,###', 'ar').format(_totalSales)} ุฑ.ู',
  valueColor: AppColors.success,
)
```

---

### 2๏ธโฃ ุฅุถุงูุฉ ูุณู "ุงููุชุงุฌุฑ ุงูุฃูุซุฑ ูุดุงุทุงู"

#### ุงููููุน:
```
ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
   โโโ ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช + ุงููุฎุฒูู
   โโโ ุงูุฃููููุงุช ุงูุณุฑูุนุฉ
   โโโ ุงูุทูุจุงุช ุงูุฃุฎูุฑุฉ (ุขุฎุฑ 3)
   โโโ ุงููุชุงุฌุฑ ุงูุฃูุซุฑ ูุดุงุทุงู (ุฃูุซุฑ 3) โ ุฌุฏูุฏ! โจ
```

#### ุงููุนุงููุฑ:
ูุชู ุชุฑุชูุจ ุงููุชุงุฌุฑ ุญุณุจ **ุงููุดุงุท ุงูููู**:
```
ุงููุดุงุท = ุนุฏุฏ ุงูุทูุจุงุช + ุนุฏุฏ ุงูุฏูุนุงุช ุงูููุฏูุฉ
```

#### ูุซุงู:
```
ูุชุฌุฑ ุงูุฃูู:
  - 15 ุทูุจ + 8 ุฏูุนุงุช = 23 ูุดุงุท

ูุชุฌุฑ ุงูููุฑ:
  - 10 ุทูุจุงุช + 5 ุฏูุนุงุช = 15 ูุดุงุท

ูุชุฌุฑ ุงููุฌุฑ:
  - 8 ุทูุจุงุช + 3 ุฏูุนุงุช = 11 ูุดุงุท

ุงูุชุฑุชูุจ: ุงูุฃูู (23) โ ุงูููุฑ (15) โ ุงููุฌุฑ (11)
```

---

### 3๏ธโฃ ุชุตููู ุจุทุงูุฉ ุงููุชุฌุฑ

#### ุงุณุชุฎุฏุงู ููุณ ุงูุชุตููู ูู `accounts_page.dart`:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ู]  ูุญูู ุนุจุฏูู ูุงุฑุน        +175,000   โ
โ      ุตุงุญุจ ุงููุชุฌุฑ: ูุญูู                 โ
โ      ๐ 777123456  ๐ ุตูุนุงุกุ ุงูุชุญุฑูุฑ    โ
โ                           206 ูุฑุช       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงูุนูุงุตุฑ ุงููุนุฑูุถุฉ:
1. **ุงูุฃูุงุชุงุฑ**: ุญุฑู ุฃูู ูู ุงุณู ุงููุชุฌุฑ (gradient ุฃุฒุฑู)
2. **ุงุณู ุงููุชุฌุฑ**: ุจุฎุท ุนุฑูุถ
3. **ุตุงุญุจ ุงููุชุฌุฑ**: ุจููู ุฑูุงุฏู
4. **ุงููุงุชู ูุงููููุน**: ุฃููููุงุช ุตุบูุฑุฉ
5. **ุงูุฑุตูุฏ**: ุจุงูุฃุญูุฑ (ุฏูู) ุฃู ุงูุฃุฎุถุฑ (ูุณุฏุฏ)
6. **ุงููุฎุฒูู**: ุนุฏุฏ ุงููุฑูุช ุงููุชุงุญุฉ

---

## ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ

### ุญุณุงุจ ุงููุดุงุท:
```dart
for (final vendor in vendors) {
  // ุนุฏุฏ ุงูุทูุจุงุช
  final ordersCount = await firestore
      .collection('orders')
      .where('vendorId', isEqualTo: vendor.id)
      .where('networkId', isEqualTo: networkId)
      .get()
      .then((s) => s.docs.length);
  
  // ุนุฏุฏ ุงูุฏูุนุงุช
  final paymentsCount = await firestore
      .collection('cash_payment_requests')
      .where('vendorId', isEqualTo: vendor.id)
      .where('networkId', isEqualTo: networkId)
      .get()
      .then((s) => s.docs.length);
  
  final activity = ordersCount + paymentsCount;
}

// ุชุฑุชูุจ ุชูุงุฒูู ุญุณุจ ุงููุดุงุท
vendors.sort((a, b) => b.activity - a.activity);

// ุฃุฎุฐ ุฃูู 3 ููุท
final top3 = vendors.take(3);
```

### ุญุณุงุจ ุงูุฑุตูุฏ ููู ูุชุฌุฑ:
```dart
// ูู transactions collection
double balance = 0;

for (transaction in transactions) {
  if (type == 'cash_payment_received') {
    balance -= amount.abs();  // ุฏูุนุฉ ูุฏููุฉ
  } else if (amount > 0) {
    balance += amount;        // ูุณุชุญูุงุช
  } else if (amount < 0) {
    balance += amount;        // ุฏูุนุฉ ุฌุฏูุฏุฉ
  }
}
```

### ุญุณุงุจ ุงููุฎุฒูู:
```dart
// ูู vendor_cards collection
final stock = await firestore
    .collection('vendor_cards')
    .where('vendorId', isEqualTo: vendor.id)
    .where('networkId', isEqualTo: networkId)
    .where('status', isEqualTo: 'available')
    .get()
    .then((s) => s.docs.length);
```

---

## ูุซุงู ุนูู ุงูุดุงุดุฉ ุงููุงููุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
      ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ - ูุงูู ุงูุดุจูุฉ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช    ุงููุฎุฒูู ุงููุชุจูู โ
โ   500,000 ุฑ.ู         1,250 ูุฑุช    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฐ    ๐ฆ    ๐ฅ    ๐               โ
โ ุฏูุนุฉ  ุจุงูุฉ ูุฑูุช ุฅุญุตุงุฆูุงุช           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุงูุทูุจุงุช ุงูุฃุฎูุฑุฉ (ุขุฎุฑ 3)

[ู] ูุญูู ุนุจุฏูู - 50 ูุฑุช - 100,000 ุฑ.ู
[ุฃ] ุงูุฃูู - 30 ูุฑุช - 60,000 ุฑ.ู
[ู] ุงูููุฑ - 20 ูุฑุช - 40,000 ุฑ.ู

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุงููุชุงุฌุฑ ุงูุฃูุซุฑ ูุดุงุทุงู (ุฃูุซุฑ 3)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ู] ูุญูู ุนุจุฏูู ูุงุฑุน   +175,000  โ
โ     ูุญูู - 777123456              โ
โ     ๐ ุตูุนุงุกุ ุงูุชุญุฑูุฑ  206 ูุฑุช   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ุฃ] ุงูุฃูู ููุงุชุตุงูุงุช    +120,000  โ
โ     ุฃุญูุฏ - 733456789              โ
โ     ๐ ุนุฏูุ ุงููุนูุง      150 ูุฑุช   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ู] ุงูููุฑ             +30,000    โ
โ     ูุญูุฏ - 780111222              โ
โ     ๐ ุชุนุฒุ ุงูุญูุจุงู    94 ูุฑุช    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ุงูููุฒุงุช

### โ ุงูุฃุฏุงุก
- ุชุญููู ุงูุจูุงูุงุช ุนูุฏ ูุชุญ ุงูุตูุญุฉ
- Skeleton loading ุฃุซูุงุก ุงูุชุญููู
- ุงุณุชุนูุงูุงุช ูุญุณูุฉ ูู Firestore

### โ ุงูุฏูุฉ
- ุญุณุงุจ ุงููุดุงุท ูู ุงูุทูุจุงุช ูุงูุฏูุนุงุช ุงููุนููุฉ
- ุญุณุงุจ ุงูุฑุตูุฏ ูู ุงููุนุงููุงุช
- ุญุณุงุจ ุงููุฎุฒูู ูู ุงููุฑูุช ุงููุชุงุญุฉ

### โ UI/UX
- ุชุตููู ููุญุฏ ูุน ุตูุญุฉ ุงููุชุงุฌุฑ
- ุฃููุงู ูุงุถุญุฉ ููุฃุฑุตุฏุฉ
- ูุนูููุงุช ูุฎุชุตุฑุฉ ููููุฏุฉ

---

## ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 1: ุนุฑุถ ุงููุชุงุฌุฑ ุงููุดุทุฉ
1. ุณุฌูู ุฏุฎูู ุจุญุณุงุจ `networkOwner`
2. ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉุ ุงุณุญุจ ููุฃุณูู
3. โ ูุฌุจ ุฃู ุชุฑู ูุณู "ุงููุชุงุฌุฑ ุงูุฃูุซุฑ ูุดุงุทุงู"
4. โ ูุฌุจ ุฃู ุชุฑู ุฃูุซุฑ 3 ูุชุงุฌุฑ ูุดุงุทุงู

### ุงูุณููุงุฑูู 2: ุงูุชุญูู ูู ุงูุชุฑุชูุจ
1. ูุงุญุธ ุงููุชุงุฌุฑ ุงููุนุฑูุถุฉ
2. ุชุญูู ูู ุนุฏุฏ ุทูุจุงุช ูุฏูุนุงุช ูู ูุชุฌุฑ
3. โ ุงูุชุฑุชูุจ ูุฌุจ ุฃู ูููู ุญุณุจ (ุทูุจุงุช + ุฏูุนุงุช)

### ุงูุณููุงุฑูู 3: ุฏูุฉ ุงูุจูุงูุงุช
1. ูุงุญุธ ุฑุตูุฏ ูุชุฌุฑ ูู ุงููุงุฆูุฉ
2. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงููุชุงุฌุฑ
3. ุงุจุญุซ ุนู ููุณ ุงููุชุฌุฑ
4. โ ุงูุฑุตูุฏ ูุงููุฎุฒูู ูุฌุจ ุฃู ูุทุงุจูุง ุชูุงูุงู

---

## ุงููููุงุช ุงููุนุฏูุฉ

### `network_owner_home_page.dart`
โ ุชุบููุฑ ูุต "ุฅุฌูุงูู ุงููุจูุนุงุช" โ "ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช"  
โ ุฅุถุงูุฉ ูุณู `_MostActiveVendorsSection`  
โ ุฅุถุงูุฉ widget `_ActiveVendorTile`  
โ ุฅุถุงูุฉ import ูู `cloud_firestore`

---

## ููุงุญุธุงุช ูููุฉ

### ูุนูุงุฑ ุงููุดุงุท:
```
ุงููุดุงุท = ุนุฏุฏ ุงูุทูุจุงุช + ุนุฏุฏ ุงูุฏูุนุงุช
```

**ููุงุฐุง ูุฐุง ุงููุนูุงุฑุ**
- ูุนูุณ ุชูุงุนู ุงููุชุฌุฑ ูุน ุงูุดุจูุฉ
- ุงููุชุงุฌุฑ ุงููุดุทุฉ ุชูุฏู ุทูุจุงุช ูุชุณุฏุฏ ุฏูุนุงุช
- ูุคุดุฑ ุนูู ุงูุฃุฏุงุก ูุงูุงูุชุฒุงู

### ุญุฏ ุงูุนุฑุถ:
- ููุนุฑุถ **ุฃูุซุฑ 3 ูุชุงุฌุฑ** ููุท
- ูู ูุงู ููุงู ุฃูู ูู 3ุ ููุนุฑุถ ูุง ูู ูุชุงุญ
- ูู ูุง ููุฌุฏ ูุชุงุฌุฑุ ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ูุชุงุฌุฑ ูุดุทุฉ"

### ุงูุชุตููู:
- โ ููุณ ุจุทุงูุฉ ุงููุชุฌุฑ ูู `accounts_page.dart`
- โ ููุญุฏ ูู ุฌููุน ุฃูุญุงุก ุงูุชุทุจูู
- โ ุณูู ุงููุฑุงุกุฉ ูุงูููู

---

## ุชุงุฑูุฎ ุงูุชุญุฏูุซ
**30 ุฃูุชูุจุฑ 2025** - ุชู ุชุทุจูู ุงูุชุญุณููุงุช ุจูุฌุงุญ

## ุงูุญุงูุฉ
โ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู**
โ **ูุฎุชุจุฑ ููุณุชูุฑ**
โ **ูุชูุงูู ูุน ุงูุชุตููู**

