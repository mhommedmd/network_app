# ูุธุงู ุงูุดุจูุงุช ูููุงุท ุงูุจูุน - POS Vendor Networks System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุชูุงูู ูุณูุญ ูููุงุท ุงูุจูุน ุจุงูุจุญุซ ุนู ุงูุดุจูุงุช ูุงูุงุชุตุงู ุจูุง ูุนุฑุถ ุจุงูุงุชูุง.

---

## ๐ ุขููุฉ ุงูุนูู

### **ุงูุณููุงุฑูู ุงููุงูู:**

```
1๏ธโฃ ููุทุฉ ุงูุจูุน (POS Vendor):
   โโ ูุจุญุซ ุนู ุดุจูุงุช
   โโ ูุตูู ุจุงููุญุงูุธุฉ ูุงููุฏูุฑูุฉ
   โโ ูุถูู ุดุจูุฉ ููุงุฆูุชู
   โโ ููุชุญ ุชูุงุตูู ุงูุดุจูุฉ

2๏ธโฃ ุตูุญุฉ ุชูุงุตูู ุงูุดุจูุฉ:
   โโ ุชุนุฑุถ ุงุณู ุงูุดุจูุฉ ููุนูููุงุชูุง
   โโ ุชุนุฑุถ ุงูุจุงูุงุช ุงููุนููุฉ ูู Firebase
   โโ ุชุธูุฑ ุงูุณุนุฑ ูุงููุฎุฒูู ููู ุจุงูุฉ
   โโ ูููู ุฅุฑุณุงู ุทูุจ

3๏ธโฃ ุงููุธุงู:
   โโ ูุณุชุนูู ูู users (type: networkOwner)
   โโ ูุญูุธ ุงูุงุชุตุงู ูู network_connections
   โโ ูุนุฑุถ ุงูุจุงูุงุช ูู packages (ููุดุจูุฉ ุงููุญุฏุฏุฉ)
   โโ ุชุญุฏูุซ real-time
```

---

## ๐๏ธ ุงููููู ุงูููู

### **Collections ูู Firebase:**

#### 1. **users** (networkOwner)
```json
{
  "id": "network_123",
  "type": "networkOwner",
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "networkName": "ุดุจูุฉ ุงูููุฑ ููุฅูุชุฑูุช",
  "phone": "777000111",
  "governorate": "ุตูุนุงุก",
  "district": "ุงูุญุตุจุฉ",
  "address": "ุดุงุฑุน ุงูุฒุจูุฑู",
  ...
}
```

#### 2. **network_connections**
```json
{
  "id": "conn_456",
  "vendorId": "vendor_789",      โ ูุนุฑู ููุทุฉ ุงูุจูุน
  "networkId": "network_123",    โ ูุนุฑู ุงูุดุจูุฉ
  "networkName": "ุดุจูุฉ ุงูููุฑ",
  "networkOwner": "ุฃุญูุฏ ูุญูุฏ",
  "governorate": "ุตูุนุงุก",
  "district": "ุงูุญุตุจุฉ",
  "isActive": true,
  "connectedAt": "2025-10-26...",
  "balance": 0,
  "totalOrders": 0
}
```

#### 3. **packages**
```json
{
  "id": "pkg_001",
  "networkId": "network_123",    โ ุฑุจุท ุจุงูุดุจูุฉ
  "name": "ุจุงูุฉ ููููุฉ ุงูุชุตุงุฏูุฉ",
  "mikrotikName": "1Day-Economy",
  "sellingPrice": 1000,
  "purchasePrice": 800,
  "validityDays": 1,
  "dataSizeGB": 5,
  "stock": 100,
  "isActive": true,
  ...
}
```

---

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### **1. ุตูุญุฉ ุงูุดุจูุงุช:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     ุงูุดุจูุงุช            ๐        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุดุจูุงุช  |  ุงูุทูุจุงุช             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  [+ ุฅุถุงูุฉ ุดุจูุฉ]                 โ
โ                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ ู  ุดุจูุฉ ุงูููุฑ           โ โ โ
โ  โ    ุงููุงูู: ุฃุญูุฏ ูุญูุฏ     โ   โ
โ  โ    ุตูุนุงุกุ ุงูุญุตุจุฉ         โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **2. ุตูุญุฉ ุงูุจุญุซ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ    ุงูุจุญุซ ุนู ุดุจูุงุช             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ุงุณู ุงูุดุจูุฉ...               โ
โ  ๐ [ุงููุญุงูุธุฉ โผ]                โ
โ  ๐๏ธ [ุงููุฏูุฑูุฉ โผ]               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ู  ุดุจูุฉ ุงูููุฑ      โ ุฅุถุงูุฉ    โ
โ     ุฃุญูุฏ ูุญูุฏ                    โ
โ     ุตูุนุงุกุ ุงูุญุตุจุฉ                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **3. ุตูุญุฉ ุชูุงุตูู ุงูุดุจูุฉ (ุฌุฏูุฏ!):**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ  ุชูุงุตูู ุงูุดุจูุฉ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุจุงูุงุช  |  ุงููุนุงููุงุช           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ ๐ถ ุจุงูุฉ ููููุฉ ุงูุชุตุงุฏูุฉ    โ โ
โ  โ    1Day-Economy           โ โ
โ  โ โโโโโโโโโโโโฌโโโโโโโโโโโ   โ โ
โ  โ โ ุงูุตูุงุญูุฉ  โ ุงูุจูุงูุงุช โ   โ โ
โ  โ โ 1 ููู    โ 5 GB     โ   โ โ
โ  โ โโโโโโโโโโโโผโโโโโโโโโโโค   โ โ
โ  โ โ ุงูุณุนุฑ    โ ุงููุฎุฒูู  โ   โ โ
โ  โ โ 1,000 ุฑ.ูโ 100 ูุฑุช  โ   โ โ
โ  โ โโโโโโโโโโโโดโโโโโโโโโโโ   โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ ๐ถ ุจุงูุฉ ุฃุณุจูุนูุฉ           โ โ
โ  โ    ...                    โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
     [+ ุฅุฑุณุงู ุทูุจ]
```

---

## ๐ฏ ุงูููุฒุงุช

### โ **ุตูุญุฉ ุงูุดุจูุงุช:**
- ุนุฑุถ ุงูุดุจูุงุช ุงููุชุตูุฉ ูู Firebase
- ุจุญุซ ูุฅุถุงูุฉ ุดุจูุงุช ุฌุฏูุฏุฉ
- ุญุฐู ุงุชุตุงู ุดุจูุฉ
- ุชุญุฏูุซ ููุฑู (StreamBuilder)

### โ **ุตูุญุฉ ุงูุจุญุซ:**
- ุจุญุซ ูุตู (ุงุณู ุงูุดุจูุฉ ุฃู ุงููุงูู)
- ุชุตููุฉ ุจุงููุญุงูุธุฉ
- ุชุตููุฉ ุจุงููุฏูุฑูุฉ (ุฏููุงูููู)
- ููุน ุงูุชูุฑุงุฑ (ูุง ูุธูุฑ ุงูุดุจูุงุช ุงููุถุงูุฉ)

### โ **ุตูุญุฉ ุชูุงุตูู ุงูุดุจูุฉ:**
- **ุนุฑุถ ุงูุจุงูุงุช ุงููุนููุฉ ูู Firebase** โญ
- ูุนูููุงุช ุชูุตูููุฉ ููู ุจุงูุฉ
- ุงูุณุนุฑ ูุงููุฎุฒูู ุงููุญุฏุซ
- ุฒุฑ ุฅุฑุณุงู ุทูุจ

---

## ๐ฅ ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ูู Firebase

### **ุงูุฎุทูุฉ 1: ุฃุถู ุดุจูุงุช (networkOwner)**

ูู Firebase Console โ `users`:

```
Document ID: (Auto-generated)

Fields:
type: "networkOwner"
name: "ุฃุญูุฏ ูุญูุฏ"
networkName: "ุดุจูุฉ ุงูููุฑ ููุฅูุชุฑูุช"
phone: "777000111"
governorate: "ุตูุนุงุก"
district: "ุงูุญุตุจุฉ"
address: "ุดุงุฑุน ุงูุฒุจูุฑู"
email: "nour@example.com"
createdAt: (Timestamp - ุงูุขู)
```

### **ุงูุฎุทูุฉ 2: ุฃุถู ุจุงูุงุช ููุดุจูุฉ**

ูู Firebase Console โ `packages`:

```
Document ID: (Auto-generated)

Fields:
networkId: "{ูุนุฑู ุงูุดุจูุฉ ูู ุงูุฎุทูุฉ 1}"  โญ ููู ุฌุฏุงู
createdBy: "{ููุณ ูุนุฑู ุงูุดุจูุฉ}"
name: "ุจุงูุฉ ููููุฉ ุงูุชุตุงุฏูุฉ"
mikrotikName: "1Day-Economy"
sellingPrice: 1000
purchasePrice: 800
validityDays: 1
usageHours: 24
dataSizeGB: 5
dataSizeMB: 0
color: "blue"
stock: 100
isActive: true
createdAt: (Timestamp - ุงูุขู)
```

**ุฃุถู ุงููุฒูุฏ ูู ุงูุจุงูุงุช:**

```
ุจุงูุฉ 2:
networkId: "{ููุณ ูุนุฑู ุงูุดุจูุฉ}"
name: "ุจุงูุฉ ุฃุณุจูุนูุฉ"
sellingPrice: 5000
validityDays: 7
dataSizeGB: 30
stock: 50
...
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### **1. ุฅุถุงูุฉ ุดุจูุฉ:**
1. ุณุฌู ุฏุฎูู ูู **posVendor**
2. ุงุฐูุจ ูุตูุญุฉ **ุงูุดุจูุงุช**
3. ุงุถุบุท **"+ ุฅุถุงูุฉ ุดุจูุฉ"**
4. ุงุจุญุซ ุนู ุดุจูุฉ
5. ุงุถุบุท **"ุฅุถุงูุฉ"**
6. โ **ูุฌุจ ุฃู ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุดุจูุงุช!**

### **2. ุนุฑุถ ุจุงูุงุช ุงูุดุจูุฉ:**
1. ูู ุตูุญุฉ ุงูุดุจูุงุช
2. **ุงุถุบุท ุนูู ุงูุดุจูุฉ**
3. ุชูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุดุจูุฉ
4. โ **ูุฌุจ ุฃู ุชุธูุฑ ุงูุจุงูุงุช ุงููุนููุฉ ูู Firebase!**

---

## ๐ ููู ูุนูู ุงููุธุงู

### **1. ุงูุจุญุซ ุนู ุดุจูุงุช:**
```dart
// ูู FirebaseNetworkService
Query query = firestore.collection('users')
    .where('type', isEqualTo: 'networkOwner');

// ุชุตููุฉ ูู client-side
networks.where((n) => n.governorate == selectedGovernorate)
```

### **2. ุฅุถุงูุฉ ุดุจูุฉ:**
```dart
// ุฅูุดุงุก ุงุชุตุงู ูู network_connections
await firestore.collection('network_connections').add({
  'vendorId': currentVendorId,
  'networkId': selectedNetworkId,
  'networkName': ...,
  ...
});
```

### **3. ุนุฑุถ ุจุงูุงุช ุงูุดุจูุฉ:**
```dart
// ูู network_details_page
StreamBuilder<List<PackageModel>>(
  stream: FirebasePackageService.getPackagesByNetwork(networkOwnerId),
  builder: (context, snapshot) {
    // ุนุฑุถ ุงูุจุงูุงุช ุงููุนููุฉ
  }
)
```

---

## โ ุงููููุงุช ุงูููุดุฃุฉ/ุงููุญุฏุซุฉ

```
โจ ุฌุฏูุฏ:
   - network_connection_model.dart
   - firebase_network_service.dart
   - POS_VENDOR_NETWORKS_SYSTEM.md

โ๏ธ ูุญุฏุซ:
   - networks_page.dart (ุจูุงูุงุช ุญููููุฉ)
   - network_search_page.dart (ุจุญุซ ุญูููู)
   - network_details_page.dart (ุจุงูุงุช ุญููููุฉ!)
   - firestore.rules (network_connections)
   - firestore.indexes.json (ููุงุฑุณ)

๐๏ธ ุญุฐู:
   - ุฌููุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
   - NetworkPackage class
   - NetworkTransaction class
```

---

## ๐ ุงููุชูุฌุฉ

โ **ูุง ุจูุงูุงุช ุชุฌุฑูุจูุฉ** - ูู ุดูุก ูู Firebase  
โ **ุจุงูุงุช ุญููููุฉ** - ูู packages collection  
โ **ุชุญุฏูุซ ููุฑู** - StreamBuilder  
โ **ูุนูููุงุช ุฏูููุฉ** - ุงูุณุนุฑุ ุงููุฎุฒููุ ุงูุตูุงุญูุฉ  
โ **ูุงุฌูุฉ ูุธููุฉ** - ุชุตููู ุงุญุชุฑุงูู  

---

## ๐ ุงูุขู ุฌุฑูุจ:

### **1. ุณุฌู ุฏุฎูู ูู posVendor**

### **2. ุฃุถู ุดุจูุฉ:**
- ุตูุญุฉ ุงูุดุจูุงุช โ "+"
- ุงุจุญุซ โ ุงุฎุชุฑ ูุญุงูุธุฉ โ ุฅุถุงูุฉ

### **3. ุงูุชุญ ุชูุงุตูู ุงูุดุจูุฉ:**
- ุงุถุบุท ุนูู ุงูุดุจูุฉ
- **ุณุชุธูุฑ ุงูุจุงูุงุช ุงููุนููุฉ!** โจ

### **4. ุชุญูู ูู ุงูุจูุงูุงุช:**
- ุงุณู ุงูุจุงูุฉ โ
- ุงูุณุนุฑ โ
- ุงูุตูุงุญูุฉ โ
- ุงููุฎุฒูู โ
- ุงูุจูุงูุงุช โ

---

**๐ ุงููุธุงู ูุชูุงูู ูุฌุงูุฒ!**

