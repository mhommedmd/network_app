# Ø¯Ù„ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„ - Complete Orders Workflow

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙƒØ±ÙˆØª Ø¨ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø¬Ø± (POS Vendor) ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª (Network Owner) Ù…Ø¹ Ù†Ù‚Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†.

---

## ğŸ”„ Ø¢Ù„ÙŠØ© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ø§Ù„Ù…ØªØ¬Ø±    â”‚â”€â”€â”€â”€â”€â”€>â”‚  Ø§Ù„Ø·Ù„Ø¨   â”‚â”€â”€â”€â”€â”€â”€>â”‚   Ø§Ù„Ø´Ø¨ÙƒØ©    â”‚
â”‚ POS Vendor  â”‚       â”‚  Order   â”‚       â”‚Network Ownerâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                    â”‚                     â”‚
      â”‚ 1. Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨       â”‚                     â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                     â”‚
      â”‚                    â”‚                     â”‚
      â”‚                    â”‚  2. Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨   â”‚
      â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                    â”‚                     â”‚
      â”‚                    â”‚  3. Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©/Ø§Ù„Ø±ÙØ¶  â”‚
      â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                    â”‚                     â”‚
      â”‚  4. Ù†Ù‚Ù„ Ø§Ù„ÙƒØ±ÙˆØª (ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)               â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                                          â”‚
      â”‚  âœ… Ø§Ù„ÙƒØ±ÙˆØª ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†                    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

### **Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ù…ØªØ¬Ø± ÙŠØ±Ø³Ù„ Ø·Ù„Ø¨**

```
Ø§Ù„Ù…ØªØ¬Ø± (POS Vendor):
â”œâ”€ ÙŠÙØªØ­ "Ø§Ù„Ø´Ø¨ÙƒØ§Øª" â†’ ÙŠØ®ØªØ§Ø± Ø´Ø¨ÙƒØ©
â”œâ”€ ÙŠÙØªØ­ "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©"
â”œâ”€ ÙŠØ¶ØºØ· Ø²Ø± "Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨" ğŸ“¤
â””â”€ ÙŠÙ…Ù„Ø£ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ø§Ù„Ø´Ø¨ÙƒØ©: Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±           â”‚
â”‚                                â”‚
â”‚  âšª Ø¨Ø§Ù‚Ø© ÙŠÙˆÙ…ÙŠØ© (800 Ø±.ÙŠ)       â”‚
â”‚  âš« Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© (4,000 Ø±.ÙŠ)   â”‚  â† Ø§Ø®ØªÙŠØ§Ø±
â”‚                                â”‚
â”‚  Ø§Ù„ÙƒÙ…ÙŠØ©: âŠ–  50  âŠ•             â”‚  â† ØªØ­Ø¯ÙŠØ¯
â”‚                                â”‚
â”‚  ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨                 â”‚
â”‚  Ø§Ù„Ø¨Ø§Ù‚Ø©: Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©         â”‚
â”‚  Ø§Ù„ÙƒÙ…ÙŠØ©: 50 ÙƒØ±Øª                â”‚
â”‚  Ø³Ø¹Ø± Ø§Ù„ÙƒØ±Øª: 4,000 Ø±.ÙŠ          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 200,000 Ø±.ÙŠ          â”‚  â† Ù…Ø±Ø§Ø¬Ø¹Ø©
â”‚                                â”‚
â”‚       [ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ù…Ø§ ÙŠØ­Ø¯Ø« ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©:**
```javascript
1. checkStockAvailability() â† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙØ±
2. createOrder() â† Ø­ÙØ¸ ÙÙŠ Firebase
3. Status: "pending" â† Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
4. Ø±Ø³Ø§Ù„Ø©: "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­" âœ…
```

---

### **Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø´Ø¨ÙƒØ© ØªØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨**

```
Ø§Ù„Ø´Ø¨ÙƒØ© (Network Owner):
â”œâ”€ ØªÙØªØ­ "Ø§Ù„Ø´Ø¨ÙƒØ©" â†’ ØªØ§Ø¨ "Ø§Ù„Ø·Ù„Ø¨Ø§Øª"
â”œâ”€ ØªØ±Ù‰ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (real-time)
â””â”€ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Ø§Ù„ÙƒÙ„] [Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±] [Ù…ÙˆØ§ÙÙ‚] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸª Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„           ğŸŸ¡   â”‚  â† Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
â”‚     Ù…Ù†Ø° 30 Ø¯Ù‚ÙŠÙ‚Ø©               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø©: Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©      â”‚
â”‚  ğŸ« Ø§Ù„ÙƒÙ…ÙŠØ©: 50 ÙƒØ±Øª             â”‚
â”‚  ğŸ’° Ø³Ø¹Ø± Ø§Ù„ÙƒØ±Øª: 4,000 Ø±.ÙŠ       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: 200,000 Ø±.ÙŠ   â”‚
â”‚                                â”‚
â”‚  [âœ• Ø±ÙØ¶]      [âœ“ Ù…ÙˆØ§ÙÙ‚Ø©]      â”‚  â† Ø®ÙŠØ§Ø±Ø§Øª
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨**

```
Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ù…ÙˆØ§ÙÙ‚Ø©":

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø·Ù„Ø¨     â”‚
â”‚  "Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„"ØŸ                â”‚
â”‚                                â”‚
â”‚  Ø³ÙŠØªÙ… Ù†Ù‚Ù„ 50 ÙƒØ±Øª Ù…Ù†           â”‚
â”‚  "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"               â”‚
â”‚  Ø¥Ù„Ù‰ Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ¬Ø±.             â”‚
â”‚                                â”‚
â”‚    [Ø¥Ù„ØºØ§Ø¡]      [Ù…ÙˆØ§ÙÙ‚Ø©]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ù…Ø§ ÙŠØ­Ø¯Ø« ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© (Firebase Transaction):**

```javascript
1. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† 50 ÙƒØ±Øª Ù…ØªØ§Ø­:
   â”œâ”€ where('networkId', '==', network_456)
   â”œâ”€ where('packageId', '==', pkg_789)
   â”œâ”€ where('status', '==', 'available')
   â””â”€ limit(50)

2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙØ±:
   â”œâ”€ Ø¥Ø°Ø§ Ù…ØªÙˆÙØ±: Ø§Ø³ØªÙ…Ø± âœ…
   â””â”€ Ø¥Ø°Ø§ ØºÙŠØ± Ù…ØªÙˆÙØ±: Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ âŒ

3. Ù†Ù‚Ù„ ÙƒÙ„ ÙƒØ±Øª:
   â”œâ”€ Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠ vendor_cards:
   â”‚  â”œâ”€ vendorId: vendor_123
   â”‚  â”œâ”€ cardNumber: 1234-5678-9012
   â”‚  â”œâ”€ status: "available"
   â”‚  â””â”€ orderId: order_001
   â”‚
   â””â”€ ØªØ­Ø¯ÙŠØ« ÙÙŠ cards:
      â”œâ”€ status: "transferred"
      â”œâ”€ transferredTo: vendor_123
      â””â”€ orderId: order_001

4. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨:
   â”œâ”€ status: "approved"
   â”œâ”€ approvedAt: (Ø§Ù„Ø¢Ù†)
   â””â”€ Ø±Ø³Ø§Ù„Ø©: "ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØªÙ… Ù†Ù‚Ù„ Ø§Ù„ÙƒØ±ÙˆØª" âœ…
```

---

### **Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ù„Ù…ØªØ¬Ø± ÙŠØ±Ù‰ Ø§Ù„ÙƒØ±ÙˆØª**

```
Ø§Ù„Ù…ØªØ¬Ø± (POS Vendor):
â”œâ”€ ÙŠÙØªØ­ "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©"
â”œâ”€ ØªØ§Ø¨ "Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"
â””â”€ ÙŠØ±Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ø­Ø¯Ø«:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  ğŸ’° Ø§Ù„Ø³Ø¹Ø±: 4,000 Ø±.ÙŠ           â”‚
â”‚  ğŸ“Š Ø§Ù„Ø­Ø¬Ù…: 30 Ø¬ÙŠØ¬Ø§             â”‚
â”‚  â±ï¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©: 7 Ø£ÙŠØ§Ù…           â”‚
â”‚  ğŸ·ï¸ Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡: 4,000 Ø±.ÙŠ     â”‚
â”‚                                â”‚
â”‚  ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: 50 ÙƒØ±Øª âœ…         â”‚  â† Ø²Ø§Ø¯!
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

### **1. Collections ÙÙŠ Firebase:**

#### **orders (Ø§Ù„Ø·Ù„Ø¨Ø§Øª):**
```json
{
  "id": "order_001",
  "vendorId": "vendor_123",
  "vendorName": "Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„",
  "networkId": "network_456",
  "networkName": "Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±",
  "packageId": "pkg_789",
  "packageName": "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©",
  "quantity": 50,
  "pricePerCard": 4000,
  "totalAmount": 200000,
  "status": "pending",
  "createdAt": "2025-10-26T10:00:00Z",
  "approvedAt": null,
  "rejectedAt": null,
  "notes": null
}
```

**Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙƒÙ†Ø©:**
- `pending` - Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
- `approved` - ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
- `rejected` - Ù…Ø±ÙÙˆØ¶

#### **vendor_cards (Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ¬Ø±):**
```json
{
  "id": "vcard_001",
  "vendorId": "vendor_123",
  "vendorName": "Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„",
  "networkId": "network_456",
  "networkName": "Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±",
  "packageId": "pkg_789",
  "packageName": "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©",
  "cardNumber": "1234-5678-9012",
  "status": "available",
  "price": 4000,
  "orderId": "order_001",
  "transferredAt": "2025-10-26T11:00:00Z",
  "createdAt": "2025-10-26T11:00:00Z"
}
```

**Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙƒÙ†Ø©:**
- `available` - Ù…ØªØ§Ø­ Ù„Ù„Ø¨ÙŠØ¹
- `sold` - ØªÙ… Ø¨ÙŠØ¹Ù‡
- `expired` - Ù…Ù†ØªÙ‡ÙŠ

#### **cards (Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø´Ø¨ÙƒØ© - Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‚Ù„):**
```json
{
  "id": "card_001",
  "networkId": "network_456",
  "packageId": "pkg_789",
  "cardNumber": "1234-5678-9012",
  "status": "transferred",  â† ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§
  "transferredTo": "vendor_123",
  "transferredAt": "2025-10-26T11:00:00Z",
  "orderId": "order_001",
  "createdAt": "2025-10-01T08:00:00Z"
}
```

---

## ğŸ” Firestore Security Rules

```javascript
// Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
match /orders/{orderId} {
  // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ù„Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø±ØªØ¨Ø·ÙŠÙ† Ø¨Ø§Ù„Ø·Ù„Ø¨
  allow read: if isAuthenticated() && 
                 (resource.data.networkId == request.auth.uid ||
                  resource.data.vendorId == request.auth.uid);
  
  // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ù„Ù„Ù…ØªØ¬Ø± ÙÙ‚Ø·
  allow create: if isAuthenticated() && 
                   request.resource.data.vendorId == request.auth.uid;
  
  // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ù„Ù„Ø´Ø¨ÙƒØ© ÙÙ‚Ø· (Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø©/Ø§Ù„Ø±ÙØ¶)
  allow update: if isAuthenticated() && 
                   resource.data.networkId == request.auth.uid;
  
  // Ø§Ù„Ø­Ø°Ù: Ù„Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ø´Ø¨ÙƒØ©
  allow delete: if isAuthenticated() && 
                   (resource.data.networkId == request.auth.uid ||
                    resource.data.vendorId == request.auth.uid);
}

// Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ¬Ø±
match /vendor_cards/{cardId} {
  allow read: if isAuthenticated() && 
                 resource.data.vendorId == request.auth.uid;
  allow create: if isAuthenticated() && 
                   request.resource.data.vendorId == request.auth.uid;
  allow update: if isAuthenticated() && 
                   resource.data.vendorId == request.auth.uid;
  allow delete: if isAuthenticated() && 
                   resource.data.vendorId == request.auth.uid;
}
```

---

## ğŸ“Š Firestore Indexes Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```json
[
  {
    "collectionGroup": "orders",
    "fields": [
      {"fieldPath": "networkId", "order": "ASCENDING"},
      {"fieldPath": "createdAt", "order": "DESCENDING"}
    ]
  },
  {
    "collectionGroup": "orders",
    "fields": [
      {"fieldPath": "vendorId", "order": "ASCENDING"},
      {"fieldPath": "createdAt", "order": "DESCENDING"}
    ]
  },
  {
    "collectionGroup": "vendor_cards",
    "fields": [
      {"fieldPath": "vendorId", "order": "ASCENDING"},
      {"fieldPath": "networkId", "order": "ASCENDING"},
      {"fieldPath": "status", "order": "ASCENDING"}
    ]
  }
]
```

---

## ğŸ§ª Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Firebase**

#### **1.1 Ø£Ø¶Ù Ù…Ø³ØªØ®Ø¯Ù… Ø´Ø¨ÙƒØ©:**
```
Firebase Console â†’ users:

Document ID: network_456 (Ø³ÙŠÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
Fields:
  type: "networkOwner"
  name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯"
  networkName: "Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª"
  phone: "777000111"
  governorate: "ØµÙ†Ø¹Ø§Ø¡"
  district: "Ø§Ù„Ø­ØµØ¨Ø©"
  createdAt: (Timestamp - Ø§Ù„Ø¢Ù†)
```

#### **1.2 Ø£Ø¶Ù Ø¨Ø§Ù‚Ø© Ù„Ù„Ø´Ø¨ÙƒØ©:**
```
Firebase Console â†’ packages:

Document ID: pkg_789 (Ø³ÙŠÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
Fields:
  networkId: "network_456"  â­ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹!
  createdBy: "network_456"
  name: "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"
  mikrotikName: "7Days-Standard"
  sellingPrice: 6000    â† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
  purchasePrice: 4000   â† Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹
  validityDays: 7
  usageHours: 168
  dataSizeGB: 30
  dataSizeMB: 0
  color: "blue"
  stock: 100
  isActive: true
  createdAt: (Timestamp)
```

#### **1.3 Ø£Ø¶Ù ÙƒØ±ÙˆØª Ù„Ù„Ø¨Ø§Ù‚Ø©:**
```
Firebase Console â†’ cards:

Ø£Ø¶Ù 100 ÙƒØ±Øª (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… script Ø£Ùˆ ÙŠØ¯ÙˆÙŠØ§Ù‹):

Document 1:
  networkId: "network_456"
  packageId: "pkg_789"
  packageName: "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"
  cardNumber: "1234-5678-9012"
  status: "available"
  createdAt: (Timestamp)

Document 2:
  networkId: "network_456"
  packageId: "pkg_789"
  packageName: "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"
  cardNumber: "2345-6789-0123"
  status: "available"
  createdAt: (Timestamp)

... (Ø£Ø¶Ù 98 ÙƒØ±Øª Ø¢Ø®Ø±)
```

#### **1.4 Ø£Ø¶Ù Ù…Ø³ØªØ®Ø¯Ù… Ù…ØªØ¬Ø±:**
```
Firebase Console â†’ users:

Document ID: vendor_123 (Ø³ÙŠÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
Fields:
  type: "posVendor"
  name: "Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„"
  phone: "733000222"
  governorate: "ØµÙ†Ø¹Ø§Ø¡"
  district: "Ø§Ù„Ø³Ø¨Ø¹ÙŠÙ†"
  createdAt: (Timestamp)
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨**

#### **2.1 ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ¬Ø±:**
```
1. Ø§ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
2. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ posVendor:
   - Phone: 733000222
   - Password: (ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±)
```

#### **2.2 Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø¨ÙƒØ©:**
```
1. Ø§Ø°Ù‡Ø¨ Ù„Ù€ "Ø§Ù„Ø´Ø¨ÙƒØ§Øª"
2. Ø§Ø¶ØºØ· (+) Ø£Ùˆ "Ø¥Ø¶Ø§ÙØ© Ø´Ø¨ÙƒØ©"
3. Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: ØµÙ†Ø¹Ø§Ø¡
4. Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©: Ø§Ù„Ø­ØµØ¨Ø©
5. ÙŠØ¬Ø¨ Ø£Ù† ØªØ¸Ù‡Ø± "Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±"
6. Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ©"
7. âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
```

#### **2.3 Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨:**
```
1. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±"
2. ØªÙØªØ­ ØµÙØ­Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„
3. ÙÙŠ ØªØ§Ø¨ "Ø§Ù„Ø¨Ø§Ù‚Ø§Øª":
   âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"
   âœ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: 0 ÙƒØ±Øª (Ù„Ø£Ù†Ùƒ Ù„Ù… ØªØ·Ù„Ø¨ Ø¨Ø¹Ø¯)
4. Ø§Ø¶ØºØ· Ø²Ø± "Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨" (Ø§Ù„Ø²Ø± Ø§Ù„Ø¹Ø§Ø¦Ù…)
5. Ø§Ø®ØªØ± "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"
6. Ø­Ø¯Ø¯ Ø§Ù„ÙƒÙ…ÙŠØ©: 50
7. Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 200,000 Ø±.ÙŠ
8. Ø§Ø¶ØºØ· "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"
9. âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­"
```

#### **2.4 Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ ØªØ§Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:**
```
1. Ø§Ø°Ù‡Ø¨ Ù„ØªØ§Ø¨ "Ø§Ù„Ø·Ù„Ø¨Ø§Øª" ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø´Ø¨ÙƒØ§Øª
2. âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ Ø§Ù„Ø·Ù„Ø¨
3. Ø§Ù„Ø­Ø§Ù„Ø©: ğŸŸ¡ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨**

#### **3.1 ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©:**
```
1. Ø³Ø¬Ù„ Ø®Ø±ÙˆØ¬ Ù…Ù† Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªØ¬Ø±
2. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ networkOwner:
   - Phone: 777000111
   - Password: (ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±)
```

#### **3.2 Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:**
```
1. Ø§Ø°Ù‡Ø¨ Ù„Ù€ "Ø§Ù„Ø´Ø¨ÙƒØ©"
2. Ø§Ø¶ØºØ· ØªØ§Ø¨ "Ø§Ù„Ø·Ù„Ø¨Ø§Øª"
3. âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† "Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„"
4. ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:
   - Ø§Ù„Ø¨Ø§Ù‚Ø©: Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©
   - Ø§Ù„ÙƒÙ…ÙŠØ©: 50 ÙƒØ±Øª
   - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 200,000 Ø±.ÙŠ
   - Ø§Ù„Ø­Ø§Ù„Ø©: ğŸŸ¡ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
```

#### **3.3 Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨:**
```
1. Ø§Ø¶ØºØ· Ø²Ø± "Ù…ÙˆØ§ÙÙ‚Ø©" âœ“
2. Ø§Ù‚Ø±Ø£ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯
3. Ø§Ø¶ØºØ· "Ù…ÙˆØ§ÙÙ‚Ø©"
4. Ø§Ù†ØªØ¸Ø± Ù„Ø­Ø¸Ø© (ÙŠØªÙ… Ù†Ù‚Ù„ 50 ÙƒØ±Øª)
5. âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ "ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØªÙ… Ù†Ù‚Ù„ Ø§Ù„ÙƒØ±ÙˆØª Ø¨Ù†Ø¬Ø§Ø­"
6. Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†: ğŸŸ¢ ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
```

#### **3.4 Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†:**
```
1. Ø§Ø°Ù‡Ø¨ Ù„ØªØ§Ø¨ "Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"
2. Ø§Ø¨Ø­Ø« Ø¹Ù† "Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©"
3. âœ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†: 50 ÙƒØ±Øª (100 - 50)
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±**

#### **4.1 ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ¬Ø± Ù…Ø¬Ø¯Ø¯Ø§Ù‹:**
```
1. Ø³Ø¬Ù„ Ø®Ø±ÙˆØ¬ Ù…Ù† Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø¨ÙƒØ©
2. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ posVendor
```

#### **4.2 Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†:**
```
1. Ø§Ø°Ù‡Ø¨ Ù„Ù€ "Ø§Ù„Ø´Ø¨ÙƒØ§Øª"
2. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±"
3. ÙÙŠ ØªØ§Ø¨ "Ø§Ù„Ø¨Ø§Ù‚Ø§Øª":
4. âœ… Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© â†’ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: 50 ÙƒØ±Øª
```

#### **4.3 Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨:**
```
1. Ø§Ø°Ù‡Ø¨ Ù„ØªØ§Ø¨ "Ø§Ù„Ø·Ù„Ø¨Ø§Øª"
2. âœ… ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ Ø§Ù„Ø·Ù„Ø¨
3. Ø§Ù„Ø­Ø§Ù„Ø©: ğŸŸ¢ ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
```

---

## ğŸ¨ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª

### **ØµÙØ­Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ (Ø§Ù„Ù…ØªØ¬Ø±):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  ğŸ¢ Ø§Ù„Ø´Ø¨ÙƒØ©: Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±        â”‚
â”‚                                â”‚
â”‚  Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø©:                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âš« Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©          â”‚ â”‚
â”‚  â”‚    Ø§Ù„Ø³Ø¹Ø±: 4,000 Ø±.ÙŠ      â”‚ â”‚
â”‚  â”‚    Ù…ØªÙˆÙØ±: 100            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  Ø§Ù„ÙƒÙ…ÙŠØ©: âŠ–  50  âŠ•            â”‚
â”‚                                â”‚
â”‚  ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨                â”‚
â”‚  Ø§Ù„Ø¨Ø§Ù‚Ø©: Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©        â”‚
â”‚  Ø§Ù„ÙƒÙ…ÙŠØ©: 50 ÙƒØ±Øª               â”‚
â”‚  Ø³Ø¹Ø± Ø§Ù„ÙƒØ±Øª: 4,000 Ø±.ÙŠ         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 200,000 Ø±.ÙŠ         â”‚
â”‚                                â”‚
â”‚       [ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„Ø´Ø¨ÙƒØ©):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Ø§Ù„Ø·Ù„Ø¨Ø§Øª               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ [Ø§Ù„ÙƒÙ„] [Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±] [Ù…ÙˆØ§ÙÙ‚] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸª Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù…Ù„      ğŸŸ¡   â”‚ â”‚
â”‚  â”‚    Ù…Ù†Ø° 30 Ø¯Ù‚ÙŠÙ‚Ø©          â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚  â”‚ ğŸ“¦ Ø¨Ø§Ù‚Ø©: Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©   â”‚ â”‚
â”‚  â”‚ ğŸ« Ø§Ù„ÙƒÙ…ÙŠØ©: 50 ÙƒØ±Øª        â”‚ â”‚
â”‚  â”‚ ğŸ’° Ø³Ø¹Ø± Ø§Ù„ÙƒØ±Øª: 4,000 Ø±.ÙŠ  â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚  â”‚ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 200,000 Ø±.ÙŠ     â”‚ â”‚
â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚  [âœ• Ø±ÙØ¶]  [âœ“ Ù…ÙˆØ§ÙÙ‚Ø©]    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„Ù…ØªØ¬Ø±):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø§Ù„Ø´Ø¨ÙƒØ§Øª  |  Ø§Ù„Ø·Ù„Ø¨Ø§Øª           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¢ Ø´Ø¨ÙƒØ© Ø§Ù„Ù†ÙˆØ±      ğŸŸ¢   â”‚ â”‚
â”‚  â”‚    Ù…Ù†Ø° Ø³Ø§Ø¹Ø©              â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚  â”‚ ğŸ“¦ Ø¨Ø§Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©         â”‚ â”‚
â”‚  â”‚ ğŸ« 50 ÙƒØ±Øª 200,000 Ø±.ÙŠ    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### **FirebaseOrderService:**

```dart
// Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
Future<String> createOrder(OrderModel order)

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©
Stream<List<OrderModel>> getNetworkOrders(String networkId)

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
Stream<List<OrderModel>> getVendorOrders(String vendorId)

// Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ (+ Ù†Ù‚Ù„ Ø§Ù„ÙƒØ±ÙˆØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
Future<void> approveOrder(OrderModel order)

// Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨
Future<void> rejectOrder(String orderId, {String? notes})

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„ÙƒÙ…ÙŠØ©
Future<bool> checkStockAvailability({
  required String networkId,
  required String packageId,
  required int quantity,
})
```

### **FirebaseVendorInventoryService:**

```dart
// Ø­Ø³Ø§Ø¨ Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ¬Ø± Ù„ÙƒÙ„ Ø¨Ø§Ù‚Ø©
Future<Map<String, int>> getVendorPackageStock({
  required String vendorId,
  required String networkId,
})

// Ø­Ø³Ø§Ø¨ Ù…Ø®Ø²ÙˆÙ† Ø¨Ø§Ù‚Ø© Ù…Ø¹ÙŠÙ†Ø©
Future<int> getPackageStockCount({
  required String vendorId,
  required String networkId,
  required String packageId,
})
```

---

## ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

### **1. Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ØºÙŠØ± ÙƒØ§ÙÙ:**
```
Ø¥Ø°Ø§ Ø±Ø£ÙŠØª "Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ØºÙŠØ± ÙƒØ§ÙÙ" Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:
â”œâ”€ ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±ÙˆØª ÙÙŠ cards
â”œâ”€ ØªØ£ÙƒØ¯ Ù…Ù† status: "available"
â””â”€ ØªØ£ÙƒØ¯ Ù…Ù† packageId ØµØ­ÙŠØ­
```

### **2. Ø§Ù„Ø·Ù„Ø¨ Ù„Ø§ ÙŠØ¸Ù‡Ø±:**
```
â”œâ”€ ØªØ­Ù‚Ù‚ Ù…Ù† Firestore Rules
â”œâ”€ ØªØ£ÙƒØ¯ Ù…Ù† networkId Ùˆ vendorId ØµØ­ÙŠØ­ÙŠÙ†
â””â”€ Ø±Ø§Ø¬Ø¹ Debug Console
```

### **3. Ø§Ù„ÙƒØ±ÙˆØª Ù„Ø§ ØªÙÙ†Ù‚Ù„:**
```
â”œâ”€ ØªØ­Ù‚Ù‚ Ù…Ù† Firebase Transaction
â”œâ”€ Ø±Ø§Ø¬Ø¹ Debug Console Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
â”œâ”€ ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆÙØ± Ø§Ù„ÙƒÙ…ÙŠØ©
â””â”€ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
```

---

## ğŸ“¦ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©

```
âœ¨ Models:
   âœ“ order_model.dart

âœ¨ Services:
   âœ“ firebase_order_service.dart
   âœ“ firebase_vendor_inventory_service.dart

âœ¨ Pages:
   âœ“ send_order_page.dart (POS Vendor)
   âœ“ network_page.dart (Network Owner - ØªØ§Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª)
   âœ“ networks_page.dart (POS Vendor - ØªØ§Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª)

âœ¨ Widgets:
   âœ“ order_card.dart

âœï¸ Ù…Ø­Ø¯Ø«:
   âœ“ network_details_page.dart (Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ + Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ¬Ø±)
   âœ“ firestore.rules (orders + vendor_cards)
   âœ“ firestore.indexes.json

ğŸ—‘ï¸ Ø­Ø°Ù:
   âœ“ order_provider.dart (ØºÙŠØ± Ù…ØªÙˆØ§ÙÙ‚)
```

---

## ğŸ‰ Ø§Ù„Ù…ÙŠØ²Ø§Øª

### âœ… **Ø£Ù…Ø§Ù† Ø¹Ø§Ù„ÙŠ:**
- Firebase Transactions Ù„Ø¶Ù…Ø§Ù† Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙØ± Ù‚Ø¨Ù„ Ø§Ù„Ù†Ù‚Ù„
- Ù‚ÙˆØ§Ø¹Ø¯ Ø£Ù…Ø§Ù† ØµØ§Ø±Ù…Ø©
- Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù†Ù‚Ù„ ÙƒØ±ÙˆØª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©

### âœ… **ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ°ÙƒÙŠ:**
- Ù†Ù‚Ù„ Ø§Ù„ÙƒØ±ÙˆØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙÙˆØ±ÙŠ
- ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØ±ÙˆØª
- real-time updates

### âœ… **ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©:**
- ØªØµÙ…ÙŠÙ… Ù…ØªÙ†Ø§Ø³Ù‚
- Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ø¶Ø­Ø©
- ØªØ£ÙƒÙŠØ¯ Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©
- Ø£Ù„ÙˆØ§Ù† ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø­Ø§Ù„Ø§Øª

---

## ğŸ”„ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„

```mermaid
sequenceDiagram
    participant V as Ø§Ù„Ù…ØªØ¬Ø± (Vendor)
    participant F as Firebase
    participant N as Ø§Ù„Ø´Ø¨ÙƒØ© (Network)
    
    V->>F: Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ (createOrder)
    F->>F: Ø­ÙØ¸ ÙÙŠ orders (status: pending)
    F-->>V: ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ âœ…
    
    N->>F: Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª (getNetworkOrders)
    F-->>N: Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    N->>N: Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
    
    N->>F: Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ (approveOrder)
    F->>F: Transaction Ø¨Ø¯Ø£Øª
    F->>F: 1. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† 50 ÙƒØ±Øª Ù…ØªØ§Ø­
    F->>F: 2. Ù†Ù‚Ù„ Ø¥Ù„Ù‰ vendor_cards
    F->>F: 3. ØªØ­Ø¯ÙŠØ« cards (transferred)
    F->>F: 4. ØªØ­Ø¯ÙŠØ« order (approved)
    F->>F: Transaction Ø§Ù†ØªÙ‡Øª
    F-->>N: ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© âœ…
    F-->>V: Ø§Ù„Ø·Ù„Ø¨ ØªÙ… Ù‚Ø¨ÙˆÙ„Ù‡ (real-time)
    
    V->>F: Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
    F-->>V: Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: 50 ÙƒØ±Øª âœ…
```

---

## âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ

### **ÙÙŠ Firebase Console:**

#### **Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:**
```
orders:
  - status: "pending"

cards:
  - status: "available" (100 ÙƒØ±Øª)

vendor_cards:
  - (ÙØ§Ø±Øº)
```

#### **Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:**
```
orders:
  - status: "approved" âœ“
  - approvedAt: (Ø§Ù„Ø¢Ù†)

cards:
  - status: "available" (50 ÙƒØ±Øª)
  - status: "transferred" (50 ÙƒØ±Øª) âœ“
  - transferredTo: vendor_123
  - orderId: order_001

vendor_cards:
  - 50 document Ø¬Ø¯ÙŠØ¯ âœ“
  - vendorId: vendor_123
  - status: "available"
  - orderId: order_001
```

---

**ğŸ‰ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨ÙƒÙØ§Ø¡Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬!** âœ¨

---

**ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:**
- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¢Ù…Ù†Ø© Ù…Ø¹ Firebase Transactions
- Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù†Ù‚Ù„ ÙƒØ±ÙˆØª Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ù…ØªÙˆÙØ±
- Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ±ÙŠØ© (real-time)
- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

**ğŸš€ Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…!** ğŸŠ

