# ๐ง ุฅุนุฏุงุฏ Firebase ููุชุทุจูู

## ๐ ุงููุญุชููุงุช

1. [ุฅุตูุงุญ ุณุฑูุน ููุตูุงุญูุงุช](#ุฅุตูุงุญ-ุณุฑูุน)
2. [ูุดุฑ ุงูููุงุนุฏ ุงููุงููุฉ](#ูุดุฑ-ุงูููุงุนุฏ)
3. [ุงูุชุญูู ูู ุงูุนูู](#ุงูุชุญูู)
4. [ุงููููุงุช ุงููุชุนููุฉ](#ุงููููุงุช)

---

## ๐จ ุฅุตูุงุญ ุณุฑูุน

ุฅุฐุง ุธูุฑ ูู ุฎุทุฃ ุงูุตูุงุญูุงุชุ ุงุชุจุน ูุฐู ุงูุฎุทูุงุช:

### ุงูุฎุทูุงุช (5 ุฏูุงุฆู):

```
1. ุงูุชุญ: https://console.firebase.google.com/
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู: Firestore Database > Rules
4. ุงูุณุฎ ูุญุชูู ููู: firestore.rules
5. ุงูุตู ูู ุงููุญุฑุฑ
6. ุงุถุบุท: Publish
7. ุงูุชุธุฑ: โ Rules published successfully
8. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู
```

**๐ ุดุฑุญ ููุตู:** ุฑุงุฌุน `QUICK_FIX_PERMISSIONS.md`

---

## ๐ ูููุงุช Firebase ูู ุงููุดุฑูุน

| ุงูููู | ุงููุตู | ุงูุงุณุชุฎุฏุงู |
|------|--------|-----------|
| `firestore.rules` | ููุงุนุฏ ุงูุฅูุชุงุฌ | **ุงูุดุฑ ูุฐุง ูู Firebase Console** |
| `firestore-dev.rules` | ููุงุนุฏ ุงูุชุทููุฑ | ููุท ููุงุฎุชุจุงุฑ ุงููุญูู |
| `DEPLOY_FIREBASE_RULES.md` | ุฏููู ุงููุดุฑ ุงููุงูู | ุดุฑุญ ููุตู ูุน ุฃูุซูุฉ |
| `QUICK_FIX_PERMISSIONS.md` | ุฅุตูุงุญ ุณุฑูุน | ุฎุทูุงุช ุณุฑูุนุฉ ููุญู |
| `FIREBASE_SECURITY_RULES_SETUP.md` | ุดุฑุญ ุงูููุงุนุฏ | ููู ููููุฉ ุนูู ุงูููุงุนุฏ |

---

## ๐ฏ ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ

### ูุง ุชุณูุญ ุจู ุงูููุงุนุฏ:

#### โ ูุงูู ุงูุดุจูุฉ (Network Owner):
- ุฅูุดุงุก ูุชุนุฏูู ูุญุฐู ุงูุจุงูุงุช
- ุงุณุชูุฑุงุฏ ุงููุฑูุช
- ุฅุฑุณุงู ุฏูุนุงุช ููุฏูุฉ ูููุชุงุฌุฑ
- ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ูุงููุนุงููุงุช
- ุฅุฏุงุฑุฉ ุงููุชุงุฌุฑ

#### โ ุงููุชุฌุฑ (POS Vendor):
- ุนุฑุถ ุงูุจุงูุงุช ุงูููุนูุฉ
- ุทูุจ ูุฑูุช ูู ุงูุดุจูุงุช
- ุจูุน ุงููุฑูุช ููุนููุงุก
- ุงูููุงููุฉ/ุงูุฑูุถ ุนูู ุงูุฏูุนุงุช ุงูููุฏูุฉ
- ุนุฑุถ ูุนุงููุงุชู ููุจูุนุงุชู

#### โ ูุง ูุง ุชุณูุญ ุจู:
- ุงููุชุฌุฑ ูุง ูุณุชุทูุน ุฅูุดุงุก ุฃู ุชุนุฏูู ุงูุจุงูุงุช
- ุงููุชุฌุฑ ูุง ูุณุชุทูุน ุฅุฑุณุงู ุฏูุนุงุช ููุฏูุฉ
- ูุง ูููู ูุฃู ุดุฎุต ุฑุคูุฉ ุจูุงูุงุช ุงูุขุฎุฑูู
- ูุง ูููู ุงูุชุนุฏูู ุนูู ุงููุนุงููุงุช ุงูููุชููุฉ

---

## ๐ ุฃูุงู ุงูุฏูุนุงุช ุงูููุฏูุฉ

### ุงูุชุฏูู ุงูุขูู:

```
1. ุงูุดุจูุฉ ุชุฑุณู ุฏูุนุฉ
   โ
   โ ุงููุงุนุฏุฉ: isNetworkOwner && networkId == userId
   
2. ุงููุชุฌุฑ ููุฑุฃ ุงูุทูุจ
   โ
   โ ุงููุงุนุฏุฉ: vendorId == userId
   
3. ุงููุชุฌุฑ ููุงูู
   โ
   โ ุงููุงุนุฏุฉ: isVendor && status == 'pending'
   
4. ุชุณุฌูู ุงููุนุงููุงุช (4 ุนูููุงุช)
   โ
   โ ุงููุงุนุฏุฉ: isAuthenticated (ูู Transaction ูุงุญุฏุฉ)
```

---

## ๐ ุงููุฌููุนุงุช ุงููุดูููุฉ

| ุงููุฌููุนุฉ | ุงููุตู | ุงูููุงุนุฏ |
|---------|--------|---------|
| `users` | ุงููุณุชุฎุฏููู | ุงููู ููุฑุฃุ ููุณู ููุชุจ |
| `packages` | ุงูุจุงูุงุช | ุงููู ููุฑุฃุ ุงูุดุจูุฉ ุชูุชุจ |
| `cards` | ุงููุฑูุช | ุงููู ููุฑุฃุ ุงูุดุจูุฉ ุชูุชุจ |
| `vendor_cards` | ูุฑูุช ุงููุชุงุฌุฑ | ุงูุฃุทุฑุงู ููุฑุคููุ ุงููู ููุชุจ |
| `orders` | ุงูุทูุจุงุช | ุงูุฃุทุฑุงู ููุฑุคูู ูููุชุจูู |
| `sales` | ุงููุจูุนุงุช | ุงูุฃุทุฑุงู ููุฑุคููุ ุงููุชุฌุฑ ููุชุจ |
| `transactions` | ูุนุงููุงุช ุงูุดุจูุฉ | ุงูุฃุทุฑุงู ููุฑุคููุ ุงููู ููุชุจ |
| `vendor_transactions` | ูุนุงููุงุช ุงููุชุฌุฑ | ุงููุชุฌุฑ ููุฑุฃุ ุงููู ููุชุจ |
| `network_connections` | ุงูุงุชุตุงูุงุช | ุงูุฃุทุฑุงู ููุฑุคูู ูููุชุจูู |
| **`cash_payment_requests`** | **ุงูุฏูุนุงุช ุงูููุฏูุฉ** | **ููุงุนุฏ ุฎุงุตุฉ** |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ูุจู ูุดุฑ ุงูููุงุนุฏ:
```
โ Permission denied
โ ูุดู ุฅุฑุณุงู ุงูุทูุจ
โ ุฎุทุฃ ูู ุชุญููู ุงูุฏูุนุงุช
```

### ุจุนุฏ ูุดุฑ ุงูููุงุนุฏ:
```
โ ุฅุฑุณุงู ุฏูุนุฉ ููุฏูุฉ - ูุนูู
โ ูุฑุงุกุฉ ุงูุทูุจุงุช - ูุนูู
โ ุงูููุงููุฉ ุนูู ุงูุฏูุนุฉ - ูุนูู
โ ุชุณุฌูู ุงููุนุงููุงุช - ูุนูู
โ ุชุญุฏูุซ ุงูุฑุตูุฏ - ูุนูู
```

---

## ๐ ุฎุทูุงุช ุงููุดุฑ ุงููุงููุฉ

### ุทุฑููุฉ 1: Firebase Console (ููุตู ุจูุง)

```
1. ุงูุชุญ Firebase Console
2. Firestore Database > Rules
3. ุงูุณุฎ ูู firestore.rules
4. ุงูุตู ูู ุงููุญุฑุฑ
5. Publish
6. ุงูุชุธุฑ ุงูุชุฃููุฏ
```

### ุทุฑููุฉ 2: Firebase CLI

```bash
# ุชุซุจูุช (ูุฑุฉ ูุงุญุฏุฉ)
npm install -g firebase-tools

# ุชุณุฌูู ุฏุฎูู (ูุฑุฉ ูุงุญุฏุฉ)
firebase login

# ูุดุฑ
firebase deploy --only firestore:rules
```

---

## ๐ ุงููุณุชูุฏุงุช ุงูุชูุตูููุฉ

- **`QUICK_FIX_PERMISSIONS.md`** - ุฅุตูุงุญ ุณุฑูุน ุจุงูุฎุทูุงุช
- **`DEPLOY_FIREBASE_RULES.md`** - ุฏููู ุงููุดุฑ ุงููุงูู
- **`FIREBASE_SECURITY_RULES_SETUP.md`** - ุดุฑุญ ุงูููุงุนุฏ ูุงูุฃูุงู
- **`CASH_PAYMENT_SYSTEM.md`** - ุดุฑุญ ูุธุงู ุงูุฏูุนุงุช
- **`NETWORK_OWNER_PAGES_IMPROVEMENTS.md`** - ุงูุชุญุณููุงุช ุงูุฃุฎูุฑุฉ

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ูุฑุฃุช `QUICK_FIX_PERMISSIONS.md`
- [ ] ูุดุฑุช ุงูููุงุนุฏ ูู `firestore.rules` ูู Firebase Console
- [ ] ุงูุชุธุฑุช 10 ุซูุงูู ุจุนุฏ ุงููุดุฑ
- [ ] ุฃุนุฏุช ุชุดุบูู ุงูุชุทุจูู
- [ ] ุงุฎุชุจุฑุช ุฅุฑุณุงู ุฏูุนุฉ ููุฏูุฉ - โ ูุฌุญ
- [ ] ุงุฎุชุจุฑุช ูุฑุงุกุฉ ุงูุทูุจุงุช - โ ูุฌุญ
- [ ] ุงุฎุชุจุฑุช ุงูููุงููุฉ ุนูู ุฏูุนุฉ - โ ูุฌุญ

---

## ๐ ูู ุญุงูุฉ ุงููุดุงูู

### ุงููุดููุฉ: ูุง ุฒุงู ุงูุฎุทุฃ ููุฌูุฏ

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ูุดุฑ ุงูููุงุนุฏ (ุชุญูู ูู ุงูุชุงุฑูุฎ ูู Console)
2. ุงูุณุญ cache ุงูุชุทุจูู ูุฃุนุฏ ุชุดุบููู
3. ุณุฌู ุฎุฑูุฌ ูุฏุฎูู ูู ุงูุชุทุจูู
4. ุงูุชุธุฑ 30 ุซุงููุฉ ุจุนุฏ ุงููุดุฑ
5. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช

### ุงููุดููุฉ: ุฎุทุฃ ุขุฎุฑ ูู Firebase

**ุงูุญููู:**
1. ุฑุงุฌุน Firebase Console > Firestore > Usage > Errors
2. ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ
3. ุฑุงุฌุน ููู `FIREBASE_SECURITY_RULES_SETUP.md`

---

## ๐ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ูุดุฑ ุงูููุงุนุฏ:

```
โ ูุธุงู ูุงูู ูุนูู ุจูุฌุงุญ:
   - ุฅุฑุณุงู ุงูุฏูุนุงุช ุงูููุฏูุฉ
   - ุงุณุชูุงู ุงูุฅุดุนุงุฑุงุช
   - ุงูููุงููุฉ/ุงูุฑูุถ
   - ุชุณุฌูู ุงููุนุงููุงุช ุงูุชููุงุฆู
   - ุชุญุฏูุซ ุงูุฃุฑุตุฏุฉ
   - ุฃูุงู ุดุงูู

๐ ุงูุชุทุจูู ุฌุงูุฒ ููุฅูุชุงุฌ!
```

---

## ๐ก ูุตูุญุฉ ูููุฉ

**ุงุญุชูุธ ุฏุงุฆูุงู ุจู `firestore.rules` ูุญุฏุซุงู!**

ุนูุฏ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ุชุญุชุงุฌ ูุฌููุนุงุช Firebase ุฌุฏูุฏุฉ:
1. ุญุฏูุซ ููู `firestore.rules` ูุญููุงู
2. ุงูุดุฑ ูู Firebase Console
3. ุงุฎุชุจุฑ ุงูุตูุงุญูุงุช
4. ูุซูู ุงูุชุบููุฑุงุช

---

**๐ ุงุจุฏุฃ ุงูุขู:** ุงูุชุญ `QUICK_FIX_PERMISSIONS.md`

